<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DRAGON Analyzer: /Volumes/Data/Users/elzoido238/packages/dragon/analyzer/src/Sonik.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DRAGON Analyzer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_956cf9344146dcd696d78b01e0683c94.html">analyzer</a></li><li class="navelem"><a class="el" href="dir_823e5e96295e2962b00936d863b86879.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Sonik.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_sonik_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span><span class="comment">/// \file Sonik.cxx</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span><span class="comment">/// \author G. Christian</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span><span class="comment">/// \brief Implements Sonik.hxx</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span><span class="comment">///</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span><span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_database_8hxx.html">midas/Database.hxx</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_functions_8hxx.html">utils/Functions.hxx</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_valid_8hxx.html">utils/Valid.hxx</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_error_dragon_8hxx.html">utils/ErrorDragon.hxx</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="definitions_8h.html">utils/definitions.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_defaults_8hxx.html">Defaults.hxx</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_dragon_8hxx.html">Dragon.hxx</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_sonik_8hxx.html">Sonik.hxx</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacedragon_1_1utils.html">dutils</a> = <a class="code" href="namespacedragon_1_1utils.html">dragon::utils</a>;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Helper function for ::variables::set(const char*) [copied from Dsssd.cxx]</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// Perform the action of creating a database from it&#39;s string name,</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// checking if it&#39;s valid, giving error if not, or forwarding on to</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// the overloaded method taking a db pointer if it&#39;s OK.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keywordtype">bool</span> do_setv(T* t, <span class="keyword">const</span> <span class="keywordtype">char</span>* dbfile)</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classmidas_1_1_database.html">midas::Database</a> db(dbfile);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span>(db.IsZombie()) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classdragon_1_1utils_1_1_error.html">dutils::Error</a>(<span class="stringliteral">&quot;&quot;</span>, __FILE__, __LINE__)</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Zombie database: &quot;</span> &lt;&lt; dbfile;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  }</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">return</span> t-&gt;set(&amp;db);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// Make sure a database is valid</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keywordtype">bool</span> check_db(<span class="keyword">const</span> <a class="code" href="classmidas_1_1_database.html">midas::Database</a>* db, <span class="keyword">const</span> <span class="keywordtype">char</span>* cl)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordtype">bool</span> success = db &amp;&amp; !db-&gt;<a class="code" href="classmidas_1_1_database.html#ad3576a6ecdc39f283fd6035d3c4eaa16">IsZombie</a>();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span>(!success) {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    std::stringstream zmsg, where;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    where &lt;&lt; cl &lt;&lt; <span class="stringliteral">&quot;::Variables::set&quot;</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span>(db) zmsg &lt;&lt; <span class="stringliteral">&quot;, IsZombie() &quot;</span> &lt;&lt; db-&gt;<a class="code" href="classmidas_1_1_database.html#ad3576a6ecdc39f283fd6035d3c4eaa16">IsZombie</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classdragon_1_1utils_1_1_error.html">dutils::Error</a>(where.str().c_str(), __FILE__, __LINE__)</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Invalid database: 0x&quot;</span> &lt;&lt; db &lt;&lt; zmsg.str();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">return</span> success;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// ================ class Sonik ========================= //</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_sonik.html#a848c289a4f85778b68346c72efbb591d">   65</a></span>&#160;<a class="code" href="class_sonik.html#a848c289a4f85778b68346c72efbb591d">Sonik::Sonik</a>():</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  variables()</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// ::</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span>  <a class="code" href="class_sonik.html#ac9a871bc07b7575711e5c62d2efe63d2">reset</a>();</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="class_sonik.html#a8fab38767ba2388574225af36bb63fee">   72</a></span>&#160;<a class="code" href="class_sonik.html#a8fab38767ba2388574225af36bb63fee">Sonik::~Sonik</a>()</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  /// ::</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span>  ;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="class_sonik.html#ac9a871bc07b7575711e5c62d2efe63d2">   78</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_sonik.html#ac9a871bc07b7575711e5c62d2efe63d2">Sonik::reset</a>()</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  /// ::</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span>  <a class="code" href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">trf</a>.<a class="code" href="classdragon_1_1_tdc_channel.html#a461a8f7ec439fa05468b637ceb71beb6">reset</a>();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#ab7d324882fc57c1bdd6b7ea1a5d14506">dutils::reset_data</a>(<a class="code" href="class_sonik.html#a03a4a5703dbe8df53d0d72f12bc2a2c1">ehit</a>, <a class="code" href="class_sonik.html#af16610b07eff2f91c2863de646f27d66">hit</a>, <a class="code" href="class_sonik.html#a2018ee477e11465e9508ce6563fedd6b">thit</a>, <a class="code" href="class_sonik.html#a3d25994ad2d7cb2e0780f1b695afe827">rf_tof</a>, <a class="code" href="class_sonik.html#accb6a47deea58bef85429e7165d5b591">tcal0</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#acf0f635ebdca60ca980135ce447e6894">dutils::reset_array</a>(<a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, <a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="class_sonik.html#a997e380da1cfc15b7c43f7e8bc38a59e">   87</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_sonik.html#a997e380da1cfc15b7c43f7e8bc38a59e">Sonik::read_data</a>(<span class="keyword">const</span> <a class="code" href="classvme_1_1_v792.html">vme::V785</a> adcs[], <span class="keyword">const</span> <a class="code" href="classvme_1_1_v1190.html">vme::V1190</a>&amp; tdc)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /*!</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">   * Copies adc data into \c this-&gt;ecal[] with channel and module mapping taken</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">   * from variables.adc.channel and variables.adc.modules</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">   * Delegates work to dutils::channel_map()</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">   * \param [in] adcs Array of vme::V785 adc modules from which data can be taken</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">   * \param [in] tdc vme::V1190 tdc module from which data can be read</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#a14c7c20285926a9a018da79f8c76cd1d">dutils::channel_map</a>(<a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>, <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a39ec1754a615db3ae0ec8bbafbf997eb">adc</a>.<a class="code" href="namespacedragon_1_1utils.html#a7748b18220412d2f19532fd03e9bd3b8">channel</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a39ec1754a615db3ae0ec8bbafbf997eb">adc</a>.<a class="code" href="namespacedragon_1_1utils.html#a1827908f81207139da490e4fd95294f0">module</a>, adcs);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#a14c7c20285926a9a018da79f8c76cd1d">dutils::channel_map</a>(<a class="code" href="class_sonik.html#a2018ee477e11465e9508ce6563fedd6b">thit</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a0bcb44e2fbf9664f8eda3135520ce9fb">tdc</a>.<a class="code" href="namespacedragon_1_1utils.html#a021784db75d9c80d09eafa5f1bcba432">channel</a>, tdc);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#a14c7c20285926a9a018da79f8c76cd1d">dutils::channel_map</a>(<a class="code" href="class_sonik.html#accb6a47deea58bef85429e7165d5b591">tcal0</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a1b9749a9cd3ddde58e94df6274331847">tdc0</a>.<a class="code" href="namespacedragon_1_1utils.html#a021784db75d9c80d09eafa5f1bcba432">channel</a>, tdc);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">trf</a>.<a class="code" href="classdragon_1_1_tdc_channel.html#a4034c3d206ab1059c37166d1ba1210e2">read_data</a>(tdc);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="class_sonik.html#aec75ec5602e2de4ef5aabbdee3149cdd">  103</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_sonik.html#aec75ec5602e2de4ef5aabbdee3149cdd">Sonik::calculate</a>()</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /*!</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">   * Does a linear transformation on each element in \c this-&gt;ecal[] using the slopes and offsets</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">   * from variables.adc_slope and variables.adc_offset, respectively. Also calibrates the TDC</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">   * signal; calculates ehit, hit.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#ad51b51b73ea3a1a3db4149273d0e901e">dutils::linear_calibrate</a>(<a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>, <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a39ec1754a615db3ae0ec8bbafbf997eb">adc</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#ad51b51b73ea3a1a3db4149273d0e901e">dutils::linear_calibrate</a>(<a class="code" href="class_sonik.html#a2018ee477e11465e9508ce6563fedd6b">thit</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a0bcb44e2fbf9664f8eda3135520ce9fb">tdc</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#ad51b51b73ea3a1a3db4149273d0e901e">dutils::linear_calibrate</a>(<a class="code" href="class_sonik.html#accb6a47deea58bef85429e7165d5b591">tcal0</a>, <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a1b9749a9cd3ddde58e94df6274331847">tdc0</a>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">trf</a>.<a class="code" href="classdragon_1_1_tdc_channel.html#a0f72996463466abf5d87bd0e76868911">calculate</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="class_sonik.html#a3d25994ad2d7cb2e0780f1b695afe827">rf_tof</a> = <a class="code" href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">trf</a>.<a class="code" href="classdragon_1_1_tdc_channel.html#a41ea3c027128c09d8b512c0c61ec533f">get_tof</a>(<a class="code" href="class_sonik.html#accb6a47deea58bef85429e7165d5b591">tcal0</a>, 1, vme::V1190::TRAILING);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="namespacedragon_1_1utils.html#a78b3e351364b5d17df026896067afee1">dutils::is_valid_any</a>(<a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>, <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>)) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span>* <span class="keyword">const</span> pmax_front = std::max_element(<a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>, <a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>+<a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="class_sonik.html#a03a4a5703dbe8df53d0d72f12bc2a2c1">ehit</a> = *pmax_front;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="class_sonik.html#af16610b07eff2f91c2863de646f27d66">hit</a>  = pmax_front - <a class="code" href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">ecal</a>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="class_sonik.html#ade59eb517fdb132bbd0153dbe0139963">  124</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sonik.html#ade59eb517fdb132bbd0153dbe0139963">Sonik::set_variables</a>(<a class="code" href="classmidas_1_1_database.html">midas::Database</a>* db)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">bool</span> success = <a class="code" href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">variables</a>.<a class="code" href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">set</a>(db);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span>(success) success = <a class="code" href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">trf</a>.variables.<a class="code" href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">set</a>(db, <span class="stringliteral">&quot;/sonik/variables/rf_tdc&quot;</span>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">return</span> success;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// ================ class Sonik::Variables ========================= //</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="class_sonik_1_1_variables.html#a2805457a9700b50b9d878acceacc340f">  135</a></span>&#160;<a class="code" href="class_sonik_1_1_variables.html#a2805457a9700b50b9d878acceacc340f">Sonik::Variables::Variables</a>()</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">  /*! Calls reset() */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="class_sonik_1_1_variables.html#a747edbb735f884d5df6b1ab7edc40f52">reset</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="class_sonik_1_1_variables.html#a747edbb735f884d5df6b1ab7edc40f52">  141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_sonik_1_1_variables.html#a747edbb735f884d5df6b1ab7edc40f52">Sonik::Variables::reset</a>()</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  /// ::</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>  std::fill(adc.module, adc.module + <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, <a class="code" href="_defaults_8hxx.html#af0ebeec42ad19d0f401b3e9dbd37627e">DSSSD_MODULE</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="namespacedragon_1_1utils.html#a09a769a54c7dbcc41b881ca9d4c9c279">dutils::index_fill</a>(adc.channel, adc.channel + <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, <a class="code" href="_defaults_8hxx.html#aa79061af1f233f9f3defd79d68de0de3">DSSSD_ADC0</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  std::fill(adc.pedestal, adc.pedestal + <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, 0);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  std::fill(adc.slope,  adc.slope + <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, 1.);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  std::fill(adc.offset, adc.offset + <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>, 0.);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  tdc.module  = 0; <span class="comment">// unused</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  tdc.channel = <a class="code" href="_defaults_8hxx.html#a4bd9f8a3a9e90040366578d1c54b46c6">DSSSD_TDC0</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  tdc.slope   = 1.;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  tdc.offset  = 0.;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  tdc0.module  = 0; <span class="comment">// unused</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  tdc0.channel = 9;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  tdc0.slope   = 1.;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  tdc0.offset  = 0.;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  rf_tdc.module  = 0; <span class="comment">// unused</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  rf_tdc.channel = 8;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  rf_tdc.slope   = 1.;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  rf_tdc.offset  = 0.;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">  168</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">Sonik::Variables::set</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* dbfile)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  /*!</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">   * \param [in] dbfile Path of the odb file from which you are extracting variable values</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">return</span> do_setv(<span class="keyword">this</span>, dbfile);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="class_sonik_1_1_variables.html#aa3f70fdcdc112723a5a4d2c2b13d5e34">  176</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">Sonik::Variables::set</a>(<span class="keyword">const</span> <a class="code" href="classmidas_1_1_database.html">midas::Database</a>* db)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /*!</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">   * \param [in] Pointer to a constructed database.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordtype">bool</span> success = check_db(db, <span class="stringliteral">&quot;Sonik&quot;</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#afa650040ff173c8d2c283bee6958eeaf">ReadArray</a>(<span class="stringliteral">&quot;/sonik/variables/adc/module&quot;</span>,   adc.module,   <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#afa650040ff173c8d2c283bee6958eeaf">ReadArray</a>(<span class="stringliteral">&quot;/sonik/variables/adc/channel&quot;</span>,  adc.channel,  <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#afa650040ff173c8d2c283bee6958eeaf">ReadArray</a>(<span class="stringliteral">&quot;/sonik/variables/adc/slope&quot;</span>,    adc.slope,    <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#afa650040ff173c8d2c283bee6958eeaf">ReadArray</a>(<span class="stringliteral">&quot;/sonik/variables/adc/offset&quot;</span>,   adc.offset,   <a class="code" href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">MAX_CHANNELS</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc/channel&quot;</span>, tdc.channel);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc/slope&quot;</span>,   tdc.slope);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc/offset&quot;</span>,  tdc.offset);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc0/channel&quot;</span>, tdc0.channel);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc0/slope&quot;</span>,   tdc0.slope);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">if</span>(success) success = db-&gt;<a class="code" href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">ReadValue</a>(<span class="stringliteral">&quot;/sonik/variables/tdc0/offset&quot;</span>,  tdc0.offset);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> success;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="ttc" id="namespacedragon_1_1utils_html_acf0f635ebdca60ca980135ce447e6894"><div class="ttname"><a href="namespacedragon_1_1utils.html#acf0f635ebdca60ca980135ce447e6894">dragon::utils::reset_array</a></div><div class="ttdeci">void reset_array(int len, T *array)</div><div class="ttdoc">Reset all elements of an array to NO_DATA. </div><div class="ttdef"><b>Definition:</b> <a href="_valid_8hxx_source.html#l00057">Valid.hxx:57</a></div></div>
<div class="ttc" id="_valid_8hxx_html"><div class="ttname"><a href="_valid_8hxx.html">Valid.hxx</a></div><div class="ttdoc">Provides functions for setting and checking if data fields are invalid. </div></div>
<div class="ttc" id="class_sonik_html_a3d25994ad2d7cb2e0780f1b695afe827"><div class="ttname"><a href="class_sonik.html#a3d25994ad2d7cb2e0780f1b695afe827">Sonik::rf_tof</a></div><div class="ttdeci">double rf_tof</div><div class="ttdoc">Time-of-flights. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00049">Sonik.hxx:49</a></div></div>
<div class="ttc" id="class_sonik_html_a6179912a7fab0595f45043a2d48d862b"><div class="ttname"><a href="class_sonik.html#a6179912a7fab0595f45043a2d48d862b">Sonik::MAX_CHANNELS</a></div><div class="ttdeci">static const int MAX_CHANNELS</div><div class="ttdoc">Number of channels. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00023">Sonik.hxx:23</a></div></div>
<div class="ttc" id="_database_8hxx_html"><div class="ttname"><a href="_database_8hxx.html">Database.hxx</a></div><div class="ttdoc">Defines a generic (online or from XML file) database reader. </div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a0bcb44e2fbf9664f8eda3135520ce9fb"><div class="ttname"><a href="class_sonik_1_1_variables.html#a0bcb44e2fbf9664f8eda3135520ce9fb">Sonik::Variables::tdc</a></div><div class="ttdeci">dragon::utils::TdcVariables&lt; 1 &gt; tdc</div><div class="ttdoc">Tdc variables. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00074">Sonik.hxx:74</a></div></div>
<div class="ttc" id="_error_dragon_8hxx_html"><div class="ttname"><a href="_error_dragon_8hxx.html">ErrorDragon.hxx</a></div><div class="ttdoc">Defines C++ style error printing classes. </div></div>
<div class="ttc" id="classdragon_1_1_tdc_channel_html_a4034c3d206ab1059c37166d1ba1210e2"><div class="ttname"><a href="classdragon_1_1_tdc_channel.html#a4034c3d206ab1059c37166d1ba1210e2">dragon::TdcChannel::read_data</a></div><div class="ttdeci">void read_data(const vme::V1190 &amp;tdc)</div><div class="ttdoc">Reads data from TDC module. </div><div class="ttdef"><b>Definition:</b> <a href="_dragon_8hxx_source.html#l01025">Dragon.hxx:1025</a></div></div>
<div class="ttc" id="class_sonik_html_a8fab38767ba2388574225af36bb63fee"><div class="ttname"><a href="class_sonik.html#a8fab38767ba2388574225af36bb63fee">Sonik::~Sonik</a></div><div class="ttdeci">~Sonik()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00072">Sonik.cxx:72</a></div></div>
<div class="ttc" id="classmidas_1_1_database_html"><div class="ttname"><a href="classmidas_1_1_database.html">midas::Database</a></div><div class="ttdoc">Generic database reading class. </div><div class="ttdef"><b>Definition:</b> <a href="_database_8hxx_source.html#l00042">Database.hxx:42</a></div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a1b9749a9cd3ddde58e94df6274331847"><div class="ttname"><a href="class_sonik_1_1_variables.html#a1b9749a9cd3ddde58e94df6274331847">Sonik::Variables::tdc0</a></div><div class="ttdeci">dragon::utils::TdcVariables&lt; 1 &gt; tdc0</div><div class="ttdoc">Trigger TDC channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00078">Sonik.hxx:78</a></div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a2805457a9700b50b9d878acceacc340f"><div class="ttname"><a href="class_sonik_1_1_variables.html#a2805457a9700b50b9d878acceacc340f">Sonik::Variables::Variables</a></div><div class="ttdeci">Variables()</div><div class="ttdoc">Constructor, sets data to generic values. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00135">Sonik.cxx:135</a></div></div>
<div class="ttc" id="class_sonik_html_accb6a47deea58bef85429e7165d5b591"><div class="ttname"><a href="class_sonik.html#accb6a47deea58bef85429e7165d5b591">Sonik::tcal0</a></div><div class="ttdeci">double tcal0</div><div class="ttdoc">Trigger [tail] tdc value. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00053">Sonik.hxx:53</a></div></div>
<div class="ttc" id="class_sonik_html_aec75ec5602e2de4ef5aabbdee3149cdd"><div class="ttname"><a href="class_sonik.html#aec75ec5602e2de4ef5aabbdee3149cdd">Sonik::calculate</a></div><div class="ttdeci">void calculate()</div><div class="ttdoc">Performs energy and time calibrations. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00103">Sonik.cxx:103</a></div></div>
<div class="ttc" id="class_sonik_html_a997e380da1cfc15b7c43f7e8bc38a59e"><div class="ttname"><a href="class_sonik.html#a997e380da1cfc15b7c43f7e8bc38a59e">Sonik::read_data</a></div><div class="ttdeci">void read_data(const vme::V785 adcs[], const vme::V1190 &amp;tdc)</div><div class="ttdoc">Read data from vme modules. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00087">Sonik.cxx:87</a></div></div>
<div class="ttc" id="class_sonik_html_a848c289a4f85778b68346c72efbb591d"><div class="ttname"><a href="class_sonik.html#a848c289a4f85778b68346c72efbb591d">Sonik::Sonik</a></div><div class="ttdeci">Sonik()</div><div class="ttdoc">Constructor, initialize data. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00065">Sonik.cxx:65</a></div></div>
<div class="ttc" id="class_sonik_html_a11b354913955c94bc5930bfefd00dfb5"><div class="ttname"><a href="class_sonik.html#a11b354913955c94bc5930bfefd00dfb5">Sonik::trf</a></div><div class="ttdeci">dragon::TdcChannel&lt; 5 &gt; trf</div><div class="ttdoc">RF times. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00051">Sonik.hxx:51</a></div></div>
<div class="ttc" id="class_sonik_html_a2018ee477e11465e9508ce6563fedd6b"><div class="ttname"><a href="class_sonik.html#a2018ee477e11465e9508ce6563fedd6b">Sonik::thit</a></div><div class="ttdeci">double thit</div><div class="ttdoc">Calibrated time signal of the trigger (OR of all detectors) </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00046">Sonik.hxx:46</a></div></div>
<div class="ttc" id="_dragon_8hxx_html"><div class="ttname"><a href="_dragon_8hxx.html">Dragon.hxx</a></div><div class="ttdoc">Defines dragon detector classes. </div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a39ec1754a615db3ae0ec8bbafbf997eb"><div class="ttname"><a href="class_sonik_1_1_variables.html#a39ec1754a615db3ae0ec8bbafbf997eb">Sonik::Variables::adc</a></div><div class="ttdeci">dragon::utils::AdcVariables&lt; 32 &gt; adc</div><div class="ttdoc">Adc variables for the energy signals. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00072">Sonik.hxx:72</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a7748b18220412d2f19532fd03e9bd3b8"><div class="ttname"><a href="namespacedragon_1_1utils.html#a7748b18220412d2f19532fd03e9bd3b8">dragon::utils::AdcVariables::channel</a></div><div class="ttdeci">int channel[N]</div><div class="ttdoc">Maps parameters to adc channel number. </div><div class="ttdef"><b>Definition:</b> <a href="_variable_structs_8hxx_source.html#l00055">VariableStructs.hxx:55</a></div></div>
<div class="ttc" id="_defaults_8hxx_html_af0ebeec42ad19d0f401b3e9dbd37627e"><div class="ttname"><a href="_defaults_8hxx.html#af0ebeec42ad19d0f401b3e9dbd37627e">DSSSD_MODULE</a></div><div class="ttdeci">#define DSSSD_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="_defaults_8hxx_source.html#l00064">Defaults.hxx:64</a></div></div>
<div class="ttc" id="class_sonik_html_abc582c48f7089838a535cde8dd26e92f"><div class="ttname"><a href="class_sonik.html#abc582c48f7089838a535cde8dd26e92f">Sonik::variables</a></div><div class="ttdeci">Sonik::Variables variables</div><div class="ttdoc">Instance of Dsssd::Variables. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00083">Sonik.hxx:83</a></div></div>
<div class="ttc" id="class_sonik_html_ade59eb517fdb132bbd0153dbe0139963"><div class="ttname"><a href="class_sonik.html#ade59eb517fdb132bbd0153dbe0139963">Sonik::set_variables</a></div><div class="ttdeci">bool set_variables(midas::Database *db)</div><div class="ttdoc">Set variables. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00124">Sonik.cxx:124</a></div></div>
<div class="ttc" id="classvme_1_1_v1190_html"><div class="ttname"><a href="classvme_1_1_v1190.html">vme::V1190</a></div><div class="ttdef"><b>Definition:</b> <a href="_vme_8hxx_source.html#l00076">Vme.hxx:76</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html"><div class="ttname"><a href="namespacedragon_1_1utils.html">dragon::utils</a></div><div class="ttdoc">Encloses various &amp;#39;utility&amp;#39; functions. </div><div class="ttdef"><b>Definition:</b> <a href="_auto_ptr_8hxx_source.html#l00012">AutoPtr.hxx:12</a></div></div>
<div class="ttc" id="class_sonik_html_af16610b07eff2f91c2863de646f27d66"><div class="ttname"><a href="class_sonik.html#af16610b07eff2f91c2863de646f27d66">Sonik::hit</a></div><div class="ttdeci">uint32_t hit</div><div class="ttdoc">Index of the hit (highest-energy) detector. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00044">Sonik.hxx:44</a></div></div>
<div class="ttc" id="classvme_1_1_v792_html"><div class="ttname"><a href="classvme_1_1_v792.html">vme::V792</a></div><div class="ttdef"><b>Definition:</b> <a href="_vme_8hxx_source.html#l00194">Vme.hxx:194</a></div></div>
<div class="ttc" id="_defaults_8hxx_html"><div class="ttname"><a href="_defaults_8hxx.html">Defaults.hxx</a></div><div class="ttdoc">Sets default channel mappings and other variables. </div></div>
<div class="ttc" id="class_sonik_html_a03a4a5703dbe8df53d0d72f12bc2a2c1"><div class="ttname"><a href="class_sonik.html#a03a4a5703dbe8df53d0d72f12bc2a2c1">Sonik::ehit</a></div><div class="ttdeci">double ehit</div><div class="ttdoc">Energy signal of the hit detector (the one w/ highest energy) </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00042">Sonik.hxx:42</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a1827908f81207139da490e4fd95294f0"><div class="ttname"><a href="namespacedragon_1_1utils.html#a1827908f81207139da490e4fd95294f0">dragon::utils::AdcVariables::module</a></div><div class="ttdeci">int module[N]</div><div class="ttdoc">Maps parameters to adc module number. </div><div class="ttdef"><b>Definition:</b> <a href="_variable_structs_8hxx_source.html#l00052">VariableStructs.hxx:52</a></div></div>
<div class="ttc" id="_sonik_8hxx_html"><div class="ttname"><a href="_sonik_8hxx.html">Sonik.hxx</a></div><div class="ttdoc">Defines SONIK detector class. </div></div>
<div class="ttc" id="classdragon_1_1_tdc_channel_html_a41ea3c027128c09d8b512c0c61ec533f"><div class="ttname"><a href="classdragon_1_1_tdc_channel.html#a41ea3c027128c09d8b512c0c61ec533f">dragon::TdcChannel::get_tof</a></div><div class="ttdeci">double get_tof(double other, int hitnum, bool edge=vme::V1190::LEADING)</div><div class="ttdoc">Calculate TOF to another TDC hit. </div><div class="ttdef"><b>Definition:</b> <a href="_dragon_8hxx_source.html#l01045">Dragon.hxx:1045</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a021784db75d9c80d09eafa5f1bcba432"><div class="ttname"><a href="namespacedragon_1_1utils.html#a021784db75d9c80d09eafa5f1bcba432">dragon::utils::TdcVariables&lt; 1 &gt;::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Maps parameters to tdc channel number. </div><div class="ttdef"><b>Definition:</b> <a href="_variable_structs_8hxx_source.html#l00118">VariableStructs.hxx:118</a></div></div>
<div class="ttc" id="_defaults_8hxx_html_a4bd9f8a3a9e90040366578d1c54b46c6"><div class="ttname"><a href="_defaults_8hxx.html#a4bd9f8a3a9e90040366578d1c54b46c6">DSSSD_TDC0</a></div><div class="ttdeci">#define DSSSD_TDC0</div><div class="ttdef"><b>Definition:</b> <a href="_defaults_8hxx_source.html#l00068">Defaults.hxx:68</a></div></div>
<div class="ttc" id="definitions_8h_html"><div class="ttname"><a href="definitions_8h.html">definitions.h</a></div><div class="ttdoc">Defines constants used by multiple MIDAS clients. </div></div>
<div class="ttc" id="classmidas_1_1_database_html_ad895a0df5bdea70e6a0e48f454c5299f"><div class="ttname"><a href="classmidas_1_1_database.html#ad895a0df5bdea70e6a0e48f454c5299f">midas::Database::ReadValue</a></div><div class="ttdeci">bool ReadValue(const char *path, T &amp;value) const</div><div class="ttdoc">Read a single value. </div><div class="ttdef"><b>Definition:</b> <a href="_database_8hxx_source.html#l00132">Database.hxx:132</a></div></div>
<div class="ttc" id="classmidas_1_1_database_html_afa650040ff173c8d2c283bee6958eeaf"><div class="ttname"><a href="classmidas_1_1_database.html#afa650040ff173c8d2c283bee6958eeaf">midas::Database::ReadArray</a></div><div class="ttdeci">int ReadArray(const char *path, T *array, int length) const</div><div class="ttdoc">Read an array. </div><div class="ttdef"><b>Definition:</b> <a href="_database_8hxx_source.html#l00164">Database.hxx:164</a></div></div>
<div class="ttc" id="_defaults_8hxx_html_aa79061af1f233f9f3defd79d68de0de3"><div class="ttname"><a href="_defaults_8hxx.html#aa79061af1f233f9f3defd79d68de0de3">DSSSD_ADC0</a></div><div class="ttdeci">#define DSSSD_ADC0</div><div class="ttdef"><b>Definition:</b> <a href="_defaults_8hxx_source.html#l00054">Defaults.hxx:54</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_ad51b51b73ea3a1a3db4149273d0e901e"><div class="ttname"><a href="namespacedragon_1_1utils.html#ad51b51b73ea3a1a3db4149273d0e901e">dragon::utils::linear_calibrate</a></div><div class="ttdeci">void linear_calibrate(T *array, L length, const V &amp;variables)</div><div class="ttdoc">Perform linear calibration on an array. </div><div class="ttdef"><b>Definition:</b> <a href="_functions_8hxx_source.html#l00461">Functions.hxx:461</a></div></div>
<div class="ttc" id="_functions_8hxx_html"><div class="ttname"><a href="_functions_8hxx.html">Functions.hxx</a></div><div class="ttdoc">Defines some functions commonly used in processing data. </div></div>
<div class="ttc" id="class_sonik_html_ac9a871bc07b7575711e5c62d2efe63d2"><div class="ttname"><a href="class_sonik.html#ac9a871bc07b7575711e5c62d2efe63d2">Sonik::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset all data to VME::none. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00078">Sonik.cxx:78</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a78b3e351364b5d17df026896067afee1"><div class="ttname"><a href="namespacedragon_1_1utils.html#a78b3e351364b5d17df026896067afee1">dragon::utils::is_valid_any</a></div><div class="ttdeci">bool is_valid_any(T *const tArray, int len)</div><div class="ttdoc">Check if any element in an array is valid. </div><div class="ttdef"><b>Definition:</b> <a href="_valid_8hxx_source.html#l00082">Valid.hxx:82</a></div></div>
<div class="ttc" id="class_sonik_html_a0d9d6749c16661f23c419b629e91e285"><div class="ttname"><a href="class_sonik.html#a0d9d6749c16661f23c419b629e91e285">Sonik::ecal</a></div><div class="ttdeci">double ecal[MAX_CHANNELS]</div><div class="ttdoc">Calibrated energy signals. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8hxx_source.html#l00040">Sonik.hxx:40</a></div></div>
<div class="ttc" id="classdragon_1_1utils_1_1_error_html"><div class="ttname"><a href="classdragon_1_1utils_1_1_error.html">dragon::utils::Error</a></div><div class="ttdoc">Specialized Strm class to print error messages. </div><div class="ttdef"><b>Definition:</b> <a href="_error_dragon_8hxx_source.html#l00177">ErrorDragon.hxx:177</a></div></div>
<div class="ttc" id="classdragon_1_1_tdc_channel_html_a0f72996463466abf5d87bd0e76868911"><div class="ttname"><a href="classdragon_1_1_tdc_channel.html#a0f72996463466abf5d87bd0e76868911">dragon::TdcChannel::calculate</a></div><div class="ttdeci">void calculate()</div><div class="ttdoc">Calibrates TDC channels. </div><div class="ttdef"><b>Definition:</b> <a href="_dragon_8hxx_source.html#l01035">Dragon.hxx:1035</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a14c7c20285926a9a018da79f8c76cd1d"><div class="ttname"><a href="namespacedragon_1_1utils.html#a14c7c20285926a9a018da79f8c76cd1d">dragon::utils::channel_map</a></div><div class="ttdeci">void channel_map(T *output, int numch, const int *channels, const M &amp;module)</div><div class="ttdoc">Maps raw vme data into another array. </div><div class="ttdef"><b>Definition:</b> <a href="_functions_8hxx_source.html#l00256">Functions.hxx:256</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_a09a769a54c7dbcc41b881ca9d4c9c279"><div class="ttname"><a href="namespacedragon_1_1utils.html#a09a769a54c7dbcc41b881ca9d4c9c279">dragon::utils::index_fill</a></div><div class="ttdeci">void index_fill(T begin, T end, int offset=0)</div><div class="ttdoc">Fills an array with it&amp;#39;s index values. </div><div class="ttdef"><b>Definition:</b> <a href="_functions_8hxx_source.html#l00081">Functions.hxx:81</a></div></div>
<div class="ttc" id="classdragon_1_1_tdc_channel_html_a461a8f7ec439fa05468b637ceb71beb6"><div class="ttname"><a href="classdragon_1_1_tdc_channel.html#a461a8f7ec439fa05468b637ceb71beb6">dragon::TdcChannel::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Sets data to dragon::NO_DATA. </div><div class="ttdef"><b>Definition:</b> <a href="_dragon_8hxx_source.html#l01017">Dragon.hxx:1017</a></div></div>
<div class="ttc" id="namespacedragon_1_1utils_html_ab7d324882fc57c1bdd6b7ea1a5d14506"><div class="ttname"><a href="namespacedragon_1_1utils.html#ab7d324882fc57c1bdd6b7ea1a5d14506">dragon::utils::reset_data</a></div><div class="ttdeci">void reset_data(T0 &amp;t0)</div><div class="ttdoc">Reset one datum to NO_DATA. </div><div class="ttdef"><b>Definition:</b> <a href="_valid_8hxx_source.html#l00091">Valid.hxx:91</a></div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a747edbb735f884d5df6b1ab7edc40f52"><div class="ttname"><a href="class_sonik_1_1_variables.html#a747edbb735f884d5df6b1ab7edc40f52">Sonik::Variables::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset all variable values to defaults. </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00141">Sonik.cxx:141</a></div></div>
<div class="ttc" id="classmidas_1_1_database_html_ad3576a6ecdc39f283fd6035d3c4eaa16"><div class="ttname"><a href="classmidas_1_1_database.html#ad3576a6ecdc39f283fd6035d3c4eaa16">midas::Database::IsZombie</a></div><div class="ttdeci">bool IsZombie() const</div><div class="ttdoc">Tell the public if a zombie or not. </div><div class="ttdef"><b>Definition:</b> <a href="_database_8hxx_source.html#l00114">Database.hxx:114</a></div></div>
<div class="ttc" id="class_sonik_1_1_variables_html_a9e5cc51325f92db329eb68d237181ab5"><div class="ttname"><a href="class_sonik_1_1_variables.html#a9e5cc51325f92db329eb68d237181ab5">Sonik::Variables::set</a></div><div class="ttdeci">bool set(const char *dbfile)</div><div class="ttdoc">Set data values from an database (file or online) </div><div class="ttdef"><b>Definition:</b> <a href="_sonik_8cxx_source.html#l00168">Sonik.cxx:168</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 25 2018 14:13:55 for DRAGON Analyzer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
